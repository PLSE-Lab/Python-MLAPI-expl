#!/usr/bin/env python
# coding: utf-8

# **Following are the findings:**
# **24 Points have been found from the dataset related to therauptics for COVID-19
# **
# 1. for  the  covid 19 patients with diabetes  tailored therapeutic strategy and optimal goal of glucose control should 
# be formulated based on clinical classification  coexisting comorbidities.
# 
# Reference:
# sha:	d861ae454ee1e9e504b5489276719c6ca9c62bd2
# Title: Timely blood glucose management for the outbreak of 2019 novel coronavirus disease (COVID-19) is urgently needed
# Author: Wang, Aihong; Zhao, Weibo; Xu, Zhangrong; Gu, Jianwen
# Journal: Diabetes Research and Clinical Practice
# 
# 2. recently  chloroquine was found to inhibit sars cov 2 in vitro and its hydroxylated form has been proposed as a 
# possible therapy to treat patients infected with sars cov 2, in this context  other drug showed significant efficacy
# against sars cov 2 in vitro such as remdesivir  lopinavir  ribavirin  favipiravir galidesivir darunavir or  ritonavir
# 
# Reference:
# sha:	b76f4a4bd2af0739fd5ac82b0783f0c117a14322
# Title: Fighting viruses with antibiotics: an overlooked path
# Author: Colson, Philippe; Raoult, Didier
# Journal: International Journal of Antimicrobial Agents
# 
# 3. teicoplanin  a glycopeptide antibiotic routinely used to treat bacterial infection was found to be active in vitro
# against sars cov  has joined the  list of molecules that could be used as therapeutic arsenal against covid 19.
# 
# Reference:
# sha:	a2d4f42c48161b18c14ebd3e9a844ecaac536680
# Title: Teicoplanin: an alternative drug for the treatment of coronavirus COVID-19?
# Author: Baron, Sophie Alexandra; Devaux, Christian; Colson, Philippe; Raoult, Didier; Rolain, Jean-Marc
# Journal: International Journal of Antimicrobial Agents
# 
# 4.   supportive therapy and monitoring oxygen therapy and fluid management   in the  last days  recombinant interferon 
# ifn  with ribavirin and infusions of blood plasma from people who have recovered from the  covid 19 are under 
# evaluation  to treat infected subjects with encouraging results.
# 
# Reference:
# sha:	7b7c71218f8d7ea1a1f8f702e4262b839bf7cc8 
# Title:	The viral RNA capping machinery as a target for antiviral drugs
# Author:	Ferron, FranÃ§ois; Decroly, Etienne; Selisko, Barbara; Canard, Bruno
# Journal:	Antiviral Research
# 
# 5. hfnc treatment for  covid 19 pneumonia can be attempted when hypoxemia cannot be treated using conventional oxygen 
# therapy
# 
# Reference:
# sha:	a209539267a73a6fb2ed9ea4766a50687b9b8cfb
# Title: Non-invasive respiratory support for patients with novel coronavirus pneumonia: clinical efficacy and reduction in risk of infection transmission
# Author: Xia, Jin-Gen; Zhao, Jian-Ping; Cheng, Zhen-Shun; Hu, Yi; Duan, Jun; Zhan, Qing-Yuan
# Journal: Chin Med J (Engl)
# 
# 6. treatment with a soluble form of ace2 itself may exert dual functions, first slow viral entry into cells and hence 
# viral spread and second  protect the  lung from injury.
# 
# Reference:
# sha:	c630ebcdf30652f0422c3ec12a00b50241dc9bd9
# Title: Angiotensin-converting enzyme 2 (ACE2) as a SARS-CoV-2 receptor: molecular mechanisms and potential therapeutic target
# Author: Zhang, Haibo; Penninger, Josef M.; Li, Yimin; Zhong, Nanshan; Slutsky, Arthur S.
# Journal: Intensive Care Med
# 
# 7. Team reported a top down data integration approach by combining both machine learning and statistical analysis 
# techniques  followed by web lab experimental validation  to identify potential drug candidates for treating sars cov 2
# infection  we showed that the  parp1 inhibitor cvl218 discovered by our in silico drug repurposing framework may have
# the  therapeutic potential for the  treatment of covid 19  although we mainly conducted in vitro assays to
# experimentally validate the  anti sars cov 2 effects of olaparib and cvl218 due to limited time.
# 
# Reference:
# sha:	d070dc3ef2125fd891f3e023598831e23a145880
# Title: A data-driven drug repositioning framework discovered a potential therapeutic agent targeting COVID-19
# Author: Yiyue Ge; Tingzhong Tian; Suling Huang; Fangping Wan; Jingxin Li; Shuya Li; Hui Yang; Lixiang Hong; Nian Wu; Enming Yuan; Lili Cheng; Yipin Lei; Hantao Shu; Xiaolong Feng; Ziyuan Jiang; Ying Chi; Xiling Guo; Lunbiao Cui; Liang Xiao; Zeng Li; Chunhao Yang; Zehong Miao; Haidong Tang; Ligong Chen; Hainian Zeng; Dan Zhao; Fengcai Zhu; Xiaokun Shen; Jianyang Zeng
# 
# 
# 8. nucleotide analogues 2  f me utp  3  f dttp and 3  n 3  dttp  are permanent terminators for the  sars cov rdrp  their
# prodrug versions  sofosbuvir  3  f 5  ophosphoramidate dt nucleoside and 3  n 3  5  o phosphoramidate dt nucleoside 
# can be readily synthesized using the  protide prodrug approach  as shown in fig  2a  c and d  and can be developed as
# therapeutics for both sars and covid 19 the  sequence of the  primer and template used for these extension reactions
# 
# Reference:
# sha:	28884786bfd579216f563c278e1730290dd4ccb8
# Title: Nucleotide Analogues as Inhibitors of SARS-CoV Polymerase
# Author: Jingyue Ju; Xiaoxu Li; Shiv Kumar; Steffen Jockusch; Minchen Chien; Chuanjuan Tao; Irina Morozova; Sergey Kalachikov; Robert N. Kirchdoerfer; James J. Russo
# 
# 9. aggravation of crf or   from covid 19 itself caused by infection with sars cov 2  it was also suggested that crrt 
# plays an important role in the  treatment of covid 19 complicated with crf crrt is a mode of renal replacement therapy 
# for hemodynamically unstable  fluid overloaded patients and the  patients with sepsis and septic shock in management of 
# arf..... 
# 
# Reference:
# sha:	1e45cd5feb7928bbc8bcd524d9c6b7adeae08a6b
# Title: SARS-CoV-2 infection does not significantly cause acute renal injury: an analysis of 116 hospitalized patients with COVID-19 in a single hospital, Wuhan, China
# Author: Lunwen Wang; Xun Li; Hui Chen; Shaonan Yan; Yan Li; Dong Li; Zuojiong Gong
# 
# 10. mortality of severe influenza with the  treatment for secondary outcomes  including days in icu and hospital  and  
# days on mechanical ventilation  3 rcts reported relevant data showed non significant reductions between h ivig immune 
# plasma group and control group  14  17  19    a and b  15  18    decreases influenza b viral loads  15  and cytokines 
# levels in h1n1  17   there was no clinical benefit observed in patients receiving h ivig immune plasma infusion 
# according to the  findings of high quality rcts  we did not identify passive immunotherapy as an adjunctive therapy 
# providing clinical benefit for patients with severe influenza  therefore  for patients with covid 19  clinicians should 
# take such previous findings carefully into considerations before the  use of convalescent plasma in critically ill sars 
# cov 2 infected patients.
# 
# Reference:
# sha:	8d6d3be5f9353eb3358b44e646c83f1a90861b4d
# Title: The efficacy of convalescent plasma for the treatment of severe influenza
# Author: Zhiheng Xu; Jianmeng Zhou; Yongbo Huang; Xuesong Liu; Yonghao Xu; Sibei Chen; Dongdong Liu; Zhimin Lin; Xiaoqing Liu; Yimin Li
# 
# 11. different disease types  cancer patients are often recalled to the  hospital for treatment and disease surveillance  
# and the  majority of cancer treatments such as chemotherapy and radiotherapy are immunosuppressive  this prompts us to 
# consider if cancer patients were at an elevated risk of sars cov 2 infection a total of 524 cancer patients who were 
# managed at our tertiary cancer institution  zhongnan hospital of wuhan university were reviewed during the  period of 
# dec 30  2019 to feb 17  2020  it was found that cancer patients had an estimated 2 fold increased risk of covid 19 than 
# the  general population....
# 
# Reference:
# sha:	5a9164999237a46d3d6aed53bd59b17d91a9e6d0
# Title: SARS-CoV-2 transmission in cancer patients of a tertiary hospital in Wuhan
# Author: Jing Yu; Wen Ouyang; Melvin L.K. Chua; Conghua Xie
# 
# 
# 12. impaired immune system seems to be unable to mount effective cellular immune response upon the  invasion of sars cov 
# 2  thus results in no cytokine storm and no severe organs damage  in the  current clinical guidelines and practice for 
# covid 19 therapy  glucocorticoids are regularly recommended and usually prescribed  for the  purpose of inhibiting the  
# overactive immune response.
# 
# Reference:
# sha:	d9eeeb81d17be6a722b11081f13576de197d249f
# Title: 2019 novel coronavirus disease in hemodialysis (HD) patients: Report from one HD center in Wuhan, China
# Author: Yiqiong Ma; Bo Diao; Xifeng Lv; Jili Zhu; Wei Liang; Lei Liu; Wenduo Bu; Huiling Cheng; Sihao Zhang; Lianhua Yang; Ming Shi; Guohua Ding; Bo Shen; Huiming Wang
# 
# 
# 13. Some of of cases would develop severe illness  and some need further intervention in intensive care unit  icu. organ 
# dysfunction including acute respiratory distress syndrome  ards   shock  acute cardiac injury  and acute renal injury  
# can happen in severe cases with covid 19. it has been reported that critical ill patients were more likely to be older  
# had underlying diseases  and were more likely to have a symptom of dyspnea. oxygen therapy  mechanical ventilation  
# intravenous antibiotics and antiviral therapy were usually applied in clinical management  but presently there were no 
# effective drugs for improving the  clinical outcome of covid 19  especially for severe cases. ards  a rapidly 
# progressive disease  is the  main cause of death.
# 
# Reference:
# 
# sha:	97e0efc17b5a10c75f7c83b08423d27585a31df5
# Title: Immune phenotyping based on neutrophil-to-lymphocyte ratio and IgG predicts disease severity and outcome for patients with COVID-19
# Author: Bicheng Zhang; Xiaoyang Zhou; Chengliang Zhu; Fan Feng; Yanru Qiu; Jia Feng; Qingzhu Jia; Qibin Song; Bo Zhu; Jun Wang
# 
# 14. sars cov 2 negative similar to breastmilk  anal swab and neonatal throat swab samples  up to now  no evidence 
# suggested that pregnant women need caesarean section merely because of sars cov 2 positive in mother s throat swab 16  
# our study showed that female patients with covid 19 have a similar trait of clinical characteristics to the  patients 
# reported
# 
# Reference:
# sha:	111b9a6e91c938696fcdb4cb128b8ae739dbe11c
# Title: Clinical features and sexual transmission potential of SARS-CoV-2 infected female patients: a descriptive study in Wuhan, China
# Author: Pengfei Cui; Zhe Chen; Tian Wang; Jun Dai; Jinjin Zhang; Ting Ding; Jingjing Jiang; Jia Liu; Cong Zhang; Wanying Shan; Sheng Wang; Yueguang Rong; Jiang Chang; Xiaoping Miao; Xiangyi Ma; Shixuan Wang
# 
# 15. prevalence of malignancy was higher in males, it was found that in severe covid 19 patients  those with cancer had 
# poorer outcomes from covid 19 in addition  more men in our study were co infected with bacteria or   influenza virus  
# which may somewhat result in high risk...it will be clinically meaningful to further investigate why and which type of 
# influenza virus or   bacteria are more likely to co infect with sars cov 2 in men another  we observed that ntprobnp but 
# not ctni was higher in men  suggesting more damage in heart function might exist in men after sars cov 2 infection  it 
# was reported that women were associated with less remodeling after cardiac injury  due to the  protection of estrogens  
# our findings imply that physicians should pay more attention to cardiac function in men with severe covid 19
# 
# Reference: 
# sha:	2e41aee6651cf4cab4edf5aa67cc401c2bef9d67
# Title:	Sex differences in clinical findings among patients with coronavirus disease 2019 (COVID-19) and severe condition
# Author:	Jing Li; Yinghua Zhang; Fang Wang; Bing Liu; Hui Li; Guodong Tang; Zhigang Chang; Aihua Liu; Chunyi Fu; Jing Gao; Jing Li	
# 	
# 
# 
# 16. mortality of covid 19 critically ill patients is considerable  the  host directed therapies should be an option  if 
# il 6 could become a therapeutic target for treatment of critically ill patient  notably  the  il 6 monoclonal antibody 
# directed covid 19 therapy has been used in clinical trial in china  no chictr2000029765   our data strongly support this 
# notion and efficacy of il 6 monoclonal antibody directed therapy remains to be fully evaluated
# 
# Reference:
# sha:	7852aafdfb9e59e6af78a47af796325434f8922a
# Title: Detectable serum SARS-CoV-2 viral load (RNAaemia) is closely associated with drastically elevated interleukin 6 (IL-6) level in critically ill COVID-19 patients
# Author: Xiaohua Chen; Binghong Zhao; Yueming Qu; Yurou Chen; Jie Xiong; Yong Feng; Dong Men; Qianchuan Huang; Ying Liu; Bo Yang; Jinya Ding; Feng Li
# 
# 
# 17. lymphopenia is an effective and reliable indicator of severity and hospitalization in covid 19 patients  we suggest 
# that the  tlm should be included in the  diagnosis and therapeutic guidelines of covid 19
# 
# Reference:
# sha:	f19e2df932f90f387fe71533f3802875d9042160
# Title: Lymphopenia predicts disease severity of COVID-19: a descriptive and predictive study
# Author: Li Tan; Qi Wang; Duanyang Zhang; Jinya Ding; Qianchuan Huang; Yi-Quan Tang; Qiongshu Wang; Hongming Miao
# 
# 
# 18. microbiota are altered by immune depletion associated with novel coronavirus infection can help us have a better 
# understanding of the  characteristics of covid 2019 based on our findings  we suggested that the  early interventions of host immune system and gut microbiota are necessary for covid 2019 patients with refractory hypoxia  for these critical patients  extracorporeal membrane oxygenation  ecmo  therapy also should be supported early to ameliorate the  symptom of refractory hypoxia in conclusion  we discussed the  dynamic characteristics of host immune system
# 
# Reference:
# sha:	594d23a412649df7dbfef5347a2a0c208ed4417 
# Title:	A New Immunosuppressive Molecule Emodin Induces both CD4(+)FoxP3(+) and CD8(+)CD122(+) Regulatory T Cells and Suppresses Murine Allograft Rejection
# Author:	Qiu, Feifei; Liu, Huazhen; Liang, Chun-Ling; Nie, Golay D.; Dai, Zhenhua
# Journal:	Front Immunol
# 
# 
# 19. covid 19 patients had decreased serum calcium levels  calcium influx regulates both clathrin mediated and clathrin 
# independent endocytosis during viral infection  thus constituting a key mechanism for regulation of influenza a virus 
# internalization and infection 16   based on this theory  calcium channel blockers  including amlodipine  verapamil  and 
# diltiazem  as well as bapta am  have been proven effective in inhibiting iav replication in a dose dependent manner in a 
# canine kidney cell model 17   moreover  diltiazem may have both prophylactic and therapeutic effects in iav treatment 
# according to both ex vivo and in vivo testing 17   we therefore propose the  hypothesis that ca 2  levels and or   ca 2  
# channels may play a role in endocytosis and infection of sars cov 2  further studies are needed
# 
# Reference:
# sha:	3fe2552d3d8e6c9ead2c41e30fbb69e917277f53
# Title: Clinical Features of Patients Infected with the 2019 Novel Coronavirus (COVID-19) in Shanghai, China
# Author: Min Cao; Dandan Zhang; Youhua Wang; Yunfei Lu; Xiangdong Zhu; Ying Li; Honghao Xue; Yunxiao Lin; Min Zhang; Yiguo Sun; Zongguo Yang; Jia Shi; Yi Wang; Chang Zhou; Yidan Dong; Ping Liu; Steven M Dudek; Zhen Xiao; Hongzhou Lu; Longping Peng
# 
# 20. therapeutic approaches for cases known to be coinfected both sars cov 2 and mtb should bear their mtb infection 
# history in mind  for example  treatments involving immunosuppressive agents should be reconsidered  as they hold the  
# potential to reactivate latent tb infections
# 
# Reference:
# sha:	33a6aa86bb6fe30251d7f2c1f64c5b7a94c391a0
# Title: Active or latent tuberculosis increases susceptibility to COVID-19 and disease severity
# Author: Yongyu Liu; Lijun Bi; Yu Chen; Yaguo Wang; Joy Fleming; Yanhong Yu; Ye Gu; Chang Liu; Lichao Fan; Xiaodan Wang; Moxin Cheng
# 
# 
# 21. we suggest that patients with cardiac diseases  hypertension  or   diabetes  who are treated with ace2increasing 
# drugs  are at higher risk for severe covid 19 infection and  therefore  should be monitored for ace2 modulating 
# medications  such as ace inhibitors or   arbs  based on a pubmed search on feb 28  2020  we did not find any evidence to 
# suggest that antihypertensive calcium channel blockers increased ace2 expression
# 
# Reference:
# sha:	1aa561958019a5c680cdd4a6a6e5d063f3ed1831
# Title: Are patients with hypertension and diabetes mellitus at increased risk for COVID-19 infection?
# Author: Fang, Lei; Karakiulakis, George; Roth, Michael
# Journal: The Lancet Respiratory Medicine
# 
# 22. no evidence of mother to child vertical transmission was found  finally  powerful broad spectrum antibiotics and 
# corticosteroids should be avoided 9   in the  period of covid 19 outbreak  the  incidence and fatality rate of severe 
# cases in hubei province  especially 5 in wuhan city  are significantly higher than that in other regions of china  which 
# may be influenced by improper use of antibiotics and corticosteroids  premature use and excessive coverage of 
# antibiotics and corticosteroids may result in secondary infection
# 
# Reference: 
# sha:	074ca9f95ff2cb97eefbfa3486ae76d460184171
# Title:	Corona Virus Disease 2019, a growing threat to children?
# Author:	Yang, Pu; Liu, Pin; Li, Dan; Zhao, Dongchi
# Journal:	Journal of Infection
# 
# 23. outbreak of sars cov 2 and blood safety  ecdc implied a precautionary deferral of donation of blood and cells for 21 
# days after possible exposure to a confirmed patient or   anyone who returned from wuhan  china applying the  approach 
# used for sars cov and mers cov  in addition  recovering confirmed covid 19 patients should be deferred for at least 28 
# days after symptom resolution and completion of therapy
# 
# Reference: 
# sha:	a9a4101b25236a4fc0e14a9cbdd904ca8b2baffd
# Title:	Coronavirus Disease 2019: Coronaviruses and Blood Safety	Author:	Chang, Le; Yan, Ying; Wang, Lunan	Journal:	Transfusion Medicine Reviews
# 
# 
# 24. initially  interferons   nebulization  broad spectrum antibiotics  and anti viral drugs were used to reduce the 
# viral load  however  only remdesivir has shown promising impact against the virusremdesivir only and in combination with 
# chloroquine or  interferon beta significantly blocked the sars cov 2 replication and patients were declared as 
# clinically recovered  46  50  52    various other anti virals are currently being evaluated against infection nafamostat 
# nitazoxanide  ribavirin  penciclovir  favipiravir  ritonavir  aak1  baricitinib  andarbidol exhibited moderate results 
# 
# Reference:
# sha:	05e2f08d487b551346b31083c115af7bd75c8dc2
# Title: COVID-19 infection: origin, transmission, and characteristics of human coronaviruses
# Author: Adnan Shereen, Muhammad; Khan, Suliman; Kazmi, Abeer; Bashir, Nadia; Siddique, Rabeea
# Journal: Journal of Advanced Research

# In[ ]:


import pandas as pd
import numpy as np
import json
import os.path
import re

metadata=pd.read_csv("C:/temp/CORD-19-research-challenge/metadata.csv")
metadata=metadata[metadata["sha"]==metadata["sha"]] #filters out entries having sha=NaN
metadata=metadata[metadata["has_full_text"]] #filters out entries for which the full text is not available
metadata.shape
metadata=metadata[20000:28462]
#Verified upto 0 to 20K
def path(shaid): #returns path of .json file
    for dirname, _, files in os.walk('C:/temp/CORD-19-research-challenge/'):
        if shaid+'.json' in files:
            return os.path.join(dirname,shaid+".json")
metadata["Path"]=metadata.apply(lambda x: path(x["sha"]),axis=1) #this takes a while unfotunately
metadata=metadata[metadata["Path"]==metadata["Path"]]



Texts={} #dictionary: {id: "Text"}; adapted from cristian's notebook (https://www.kaggle.com/crprpr/vaccine-data-filter)
valid_id=[]
for shaid,file in zip(metadata["sha"],metadata["Path"]):
    with open(file, 'r') as f:
        doc=json.load(f)
    MainText=''
    for item in doc["body_text"]:
        MainText=MainText+(re.sub('[^a-zA-Z0-9]', ' ', item["text"].lower()))
    match1=re.search(r'therapeutic|therapy', MainText)
    if match1 is not None:
        match2=re.search(r'COVID-19 |SARS |SARS-CoV2 |AS-SCoV2 |SARS-CoV-2 ', MainText, re.IGNORECASE)
        if match2 is not None:
            Texts[shaid]=MainText
            valid_id.append(shaid)

print (Texts)


data1=open("C:/temp/CORD-19-research-challenge/level1.txt", 'r')
f = open("C:/temp/CORD-19-research-challenge/level4.txt","w",encoding="utf8")

data2=[1]
p=1
while len(data2)>0:
    data2=data1.read(20000000)
    if data2 is not None:
        data3 =  data2.split('waseem')
    for x1 in data3:
        x2=x1.split('\n')
        if x2 is not None:
            for x in x2:
                match1=re.search(r'therapeutic|therapy', x)
                if match1 is not None:
                    y=x2.index(x)
                    if len(x2)>2:
                        try:
                            z=' '.join([x2[y-2],x2[y-1],x2[y],x2[y+1],x2[y+2]])
                            match2=re.search(r'COVID|CoV2 |SCoV2 |CoV-2 ', z, re.IGNORECASE)
                            if match2 is not None:
                                f.write(z)
                                f.write('\n')
                        except IndexError:
                            pass
    quit
            
f.close()
 


# > 

# In[ ]:




